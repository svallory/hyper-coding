name: react-component-recipe
description: |
  Complete recipe for generating a React component with all necessary files,
  including tests, styles, stories, and documentation.
version: 1.0.0

# Variables that can be configured when running the recipe
variables:
  componentName:
    type: string
    description: Name of the component in PascalCase
    required: true
    pattern: "^[A-Z][a-zA-Z0-9]*$"
    validation:
      message: "Component name must be in PascalCase (e.g., MyComponent)"

  includeTests:
    type: boolean
    description: Generate test files
    default: true

  includeStyles:
    type: boolean
    description: Generate CSS module
    default: true

  includeStories:
    type: boolean
    description: Generate Storybook stories
    default: false

# Recipe steps that will be executed
steps:
  - name: Generate component
    tool: template
    template: templates/Component.tsx.jig
    output: "src/components/{{ componentName }}/{{ componentName }}.tsx"

  - name: Generate styles
    tool: template
    template: templates/Component.module.css.jig
    output: "src/components/{{ componentName }}/{{ componentName }}.module.css"
    when: "{{ includeStyles }}"
    parallel: true
    dependsOn:
      - Generate component

  - name: Generate tests
    tool: template
    template: templates/Component.test.tsx.jig
    output: "src/components/{{ componentName }}/{{ componentName }}.test.tsx"
    when: "{{ includeTests }}"
    parallel: true
    dependsOn:
      - Generate component

  - name: Generate stories
    tool: template
    template: templates/Component.stories.tsx.jig
    output: "src/components/{{ componentName }}/{{ componentName }}.stories.tsx"
    when: "{{ includeStories }}"
    parallel: true
    dependsOn:
      - Generate component

  - name: Generate index
    tool: template
    template: templates/index.ts.jig
    output: "src/components/{{ componentName }}/index.ts"
    dependsOn:
      - Generate component
      - Generate styles
      - Generate tests
      - Generate stories

  - name: Update parent index
    tool: action
    action: update-component-index
    parameters:
      componentName: "{{ componentName }}"
      path: "src/components/index.ts"
    dependsOn:
      - Generate index

  - name: Format code
    tool: codemod
    codemod: prettier-format
    files:
      - "src/components/{{ componentName }}/**/*.{ts,tsx,css}"
    dependsOn:
      - Update parent index

# Recipe settings
settings:
  timeout: 120000
  maxParallelSteps: 4
  continueOnError: false

# Example usage
examples:
  - title: Basic functional component
    description: Generate a simple functional component with default settings
    variables:
      componentName: Button

  - title: Component with all features
    description: Generate a component with tests, styles, and stories
    variables:
      componentName: Card
      includeTests: true
      includeStyles: true
      includeStories: true

  - title: Component without tests
    description: Generate a component without test files
    variables:
      componentName: Header
      includeTests: false
