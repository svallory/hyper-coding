name: basic
description: |
  Generate a simple form with native HTML validation.
  No external dependencies - uses plain HTML5 validation with shadcn/ui components.
version: 1.0.0

variables:
  name:
    type: string
    description: Form component name in PascalCase (e.g. "ContactForm", "NewsletterForm")
    required: true
    pattern: "^[A-Z][a-zA-Z0-9]*$"

  fields:
    type: array
    description: |
      Form fields in format "name:type" (e.g. "email:email", "name:text", "message:textarea")
      Supported types: text, email, password, number, tel, url, date, time, datetime, textarea, select, checkbox
    required: true

  dir:
    type: string
    description: Output directory for form component
    default: "components/forms"

  withValidation:
    type: boolean
    description: Generate Zod schema for type-safe validation
    default: true

steps:
  - name: Check shadcn/ui components
    tool: shell
    command: |
      # Check if required shadcn/ui components are installed
      if [ ! -f "components/ui/input.tsx" ]; then
        echo "Installing shadcn/ui Input component..."
        npx shadcn@latest add input --yes
      fi

      if [ ! -f "components/ui/button.tsx" ]; then
        echo "Installing shadcn/ui Button component..."
        npx shadcn@latest add button --yes
      fi

      if [ ! -f "components/ui/label.tsx" ]; then
        echo "Installing shadcn/ui Label component..."
        npx shadcn@latest add label --yes
      fi

  - name: Install Zod if needed
    tool: shell
    command: |
      if [ "{{ withValidation }}" = "true" ]; then
        if ! bun pm ls zod &>/dev/null; then
          echo "Installing Zod for validation..."
          if command -v bun &> /dev/null; then
            bun add zod
          elif command -v pnpm &> /dev/null; then
            pnpm add zod
          elif command -v yarn &> /dev/null; then
            yarn add zod
          else
            npm install zod
          fi
        fi
      fi

  - name: Create output directory
    tool: shell
    command: mkdir -p {{ dir }}

@if(withValidation)
  - name: Create schemas directory
    tool: shell
    command: mkdir -p lib/schemas

  - name: Generate Zod schema
    tool: template
    template: templates/schema.ts.jig
@end

  - name: Generate form component
    tool: template
    template: templates/form.tsx.jig

  - name: Instructions
    tool: shell
    command: |
      echo "âœ… Form generated successfully!"
      echo ""
      echo "Created files:"
      echo "  - {{ dir }}/{{ name }}.tsx"
@if(withValidation)
      echo "  - lib/schemas/{{ kebabCase(name) }}-schema.ts"
@end
      echo ""
      echo "Usage:"
      echo "  import { {{ name }} } from '@/{{ dir }}/{{ name }}'"
      echo ""
      echo "  export default function MyPage() {"
      echo "    const handleSubmit = async (formData: FormData) => {"
      echo "      // Handle form submission"
      echo "    }"
      echo ""
      echo "    return <{{ name }} onSubmit={handleSubmit} />"
      echo "  }"
